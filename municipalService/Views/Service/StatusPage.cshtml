@model List<ServiceRequest>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
<div class="container mt-5 text-center" style="padding:100px">
    <h2 class="text-center mb-4" style="color:#0a2463;">Service Request Status</h2>

<form method="post" asp-action="TrackRequest">
    <input type="text" name="id" placeholder="Enter Request ID" class="form-control" />
    <button type="submit" class="btn btn-primary mt-2">Track</button>
</form>

@if (!string.IsNullOrEmpty(ViewBag.Message))
{
    <p class="mt-3 text-info">@ViewBag.Message</p>
}

<table class="table table-bordered mt-4">
    <thead>
        <tr>
            <th>ID</th>
            <th>Description</th>
            <th>Status</th>
            <th>Progress</th>
            <th>Submitted At</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var req in Model)
        {
            <tr>
                <td>@req.ID</td>
                <td>@req.Description</td>
                <td>@req.Status</td>
                <td>
                    <div class="progress" style="height: 20px;">
                        <div class="progress-bar
                                @(req.Progress < 50 ? "bg-danger" :
                                                           req.Progress < 90 ? "bg-warning" :
                                                           req.Progress < 100 ? "bg-primary" :
                                                           "bg-success")"
                         role="progressbar"
                         style="width: @req.Progress%;"
                         aria-valuenow="@req.Progress"
                         aria-valuemin="0"
                         aria-valuemax="100">
                        @req.Progress%
                    </div>
                </div>
            </td>
            <td>@req.SubmittedAt.ToString("dd MMM yyyy")</td>
        </tr>
                }
    </tbody>
</table>
</div>